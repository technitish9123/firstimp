{"version":3,"sources":["pages/admin/sub/SubCreate.js","functions/category.js","components/nav/AdminNav.js","components/forms/CategoryForm.js","components/forms/LocalSearch.js","functions/sub.js"],"names":["Option","Select","SubCreate","user","useSelector","state","useState","name","setName","loading","setLoading","categories","setCategories","category","setCategory","subsData","setSubsData","filterCategory","setFilterCategory","useEffect","loadCategories","loadSubs","getCategories","then","c","data","getSubs","className","length","defaultValue","onChange","value","map","_id","handleSubmit","e","preventDefault","createSub","parent","token","res","toast","success","catch","err","console","log","response","status","error","filter","includes","searched","s","onClick","slug","window","confirm","removeSub","to","a","axios","get","process","getCategory","removeCategory","authtoken","delete","headers","updateCategory","put","createCategory","post","AdminNav","CategoryForm","onSubmit","type","target","autoFocus","required","LocalSearch","keyword","setKeyword","toLowerCase","placeholder","getSub","updateSub","sub"],"mappings":"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","file":"static/js/33.1c3f8896.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCategories } from \"../../../functions/category\";\r\nimport {\r\n  createSub,\r\n  getSub,\r\n  getSubs,\r\n  removeSub,\r\n  updateSub,\r\n} from \"../../../functions/sub\";\r\nimport { Spin, Select } from \"antd\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\r\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\r\n\r\nconst { Option } = Select;\r\nconst SubCreate = () => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [category, setCategory] = useState(\"\");\r\n  const [subsData, setSubsData] = useState([]);\r\n  const [filterCategory, setFilterCategory] = useState(\"\")\r\n\r\n  //search filter\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n    loadSubs();\r\n  }, []);\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((c) => setCategories(c.data));\r\n  };\r\n\r\n  const loadSubs = () => getSubs().then((c) => setSubsData(c.data));\r\n\r\n  const handleRemove = (slug) => {\r\n    if (window.confirm(\"Delete Sub?\")) {\r\n      setLoading(true);\r\n      removeSub(slug, user.token)\r\n        .then((res) => {\r\n          setLoading(false);\r\n          toast.error(`${res.data.name} deleted successfully`);\r\n          loadSubs();\r\n        })\r\n        .catch((err) => {\r\n          setLoading(false);\r\n          if (err.response.status === 400) toast.error(`${err.response.data}`);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(name);\r\n    setLoading(true);\r\n    createSub({ name, parent: category }, user.token)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        setLoading(false);\r\n        setName(\"\");\r\n        toast.success(`\"${res.data.name}\" is created`);\r\n        loadSubs();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        if (err.response.status === 400) toast.error(err.response.data);\r\n      });\r\n  };\r\n\r\n  const searched = (filterCategory) => (category) =>\r\n    category.parent.includes(filterCategory)\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          {loading ? <Spin /> : <h4>Create Sub category</h4>}\r\n\r\n          <div className=\"form-group\">\r\n            {categories.length > 0 && (\r\n              <Select\r\n                defaultValue=\"Pick Category\"\r\n                onChange={(value) => setCategory(value)}\r\n              >\r\n                {categories.map((c) => (\r\n                  <Option value={c._id} key={c._id}>\r\n                    {c.name}\r\n                  </Option>\r\n                ))}\r\n              </Select>\r\n            )}\r\n          </div>\r\n\r\n          <CategoryForm\r\n            handleSubmit={handleSubmit}\r\n            name={name}\r\n            setName={setName}\r\n          />\r\n          \r\n          <div className=\"form-group\">\r\n          <label className=\"pr-3\">filter: </label>\r\n            {categories.length > 0 && (\r\n              <Select\r\n                defaultValue=\"Pick Category\"\r\n                onChange={(value) => setFilterCategory(value)}\r\n              >\r\n                {categories.map((c) => (\r\n                  <Option value={c._id} key={c._id}>\r\n                    {c.name}\r\n                  </Option>\r\n                ))}\r\n              </Select>\r\n            )}\r\n          </div>\r\n\r\n\r\n          <hr />\r\n          \r\n          \r\n\r\n          {subsData.filter(searched(filterCategory)).map((s) => (\r\n            <div className=\"alert alert-secondary\" key={s._id}>\r\n              {s.name}\r\n              <span\r\n                onClick={() => handleRemove(s.slug)}\r\n                className=\"btn float-right\"\r\n              >\r\n                <DeleteOutlined className=\"text-danger\" />\r\n              </span>\r\n              <span className=\"btn float-right\">\r\n                <Link to={`/admin/sub/${s.slug}`}>\r\n                  <EditOutlined className=\"text-primary\" />\r\n                </Link>\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubCreate;\r\n","import axios from \"axios\";\r\n\r\nexport const getCategories = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/categories`);\r\n\r\nexport const getCategory = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/category/${slug}`);\r\n\r\nexport const removeCategory = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const updateCategory = async (slug, category, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createCategory = async (category, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/category`, category, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getSubs = async (_id) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/subs/${_id}`);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n  <nav>\r\n    <ul className=\"nav flex-column\">\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n          Dashboard\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/product\" className=\"nav-link\">\r\n          Product\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/products\" className=\"nav-link\">\r\n          Products\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/category\" className=\"nav-link\">\r\n          Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/sub\" className=\"nav-link\">\r\n          Sub Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n          Coupon\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/user/password\" className=\"nav-link\">\r\n          Password\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n","import React from \"react\";\r\n\r\nconst CategoryForm = ({handleSubmit, name, setName}) => (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-group\">\r\n        <label>Name</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          onChange={(e) => setName(e.target.value)}\r\n          value={name}\r\n          autoFocus\r\n          required\r\n        />\r\n        <br />\r\n        <button className=\"btn btn-outline-primary\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n\r\n  export default CategoryForm;","import React from \"react\";\r\n\r\n\r\nconst LocalSearch = ({ keyword, setKeyword }) => {\r\n  const handleSearchChange = (e) => {\r\n      e.preventDefault();\r\n      setKeyword(e.target.value.toLowerCase());\r\n  };\r\n\r\n  return (\r\n    <div className=\"container pt-4 pb-4\">\r\n      <input\r\n        type=\"search\"\r\n        className=\"form-control mB-4\"\r\n        value={keyword}\r\n        onChange={handleSearchChange}\r\n        placeholder=\"Filter\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default LocalSearch;","import axios from \"axios\";\r\n\r\nexport const getSubs = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/subs`);\r\n\r\nexport const getSub = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/sub/${slug}`);\r\n\r\nexport const removeSub = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/sub/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const updateSub = async (slug, sub, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/sub/${slug}`, sub,{\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createSub = async (sub, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/sub`, sub, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n"],"sourceRoot":""}